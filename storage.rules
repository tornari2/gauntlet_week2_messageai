{
  "rules_version": "2",
  "service": "firebase.storage",
  "match": {
    "b": {
      "{bucket}": {
        "o": {
          "match": {
            "chat-images": {
              "{chatId}": {
                "{imageId}": {
                  "allow": {
                    "read": "if request.auth != null",
                    "write": "if request.auth != null && request.resource.size < 5 * 1024 * 1024"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

